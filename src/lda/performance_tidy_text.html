---
title: "Job Performance: Tidy Text"
author: "Liz Miller"
date: "7/22/2020"
output: html_document
---



<div id="tidy-text-analysis-for-job-performance-scales" class="section level2">
<h2>Tidy Text Analysis for Job Performance Scales</h2>
<pre class="r"><code>library(dplyr)
library(tidyverse)
library(tidytext)
library(stm)
library(quanteda)
library(ggplot2)
library(readr)
library(stringr)
library(reshape2)
library(wordcloud)

job_perf &lt;- read_csv(&quot;/project/class/bii_sdad_dspg/uva/dod_ari2/ari2_07_21.csv&quot;)

cols &lt;- c(&#39;STEM&#39;, &#39;ITEM&#39;)
job_perf$scale &lt;- 
  apply( job_perf[ , cols ], 1 , paste, collapse = &quot; &quot;)
job_perf$scale &lt;- gsub(&quot;NA&quot;,&#39; &#39;, job_perf$scale)</code></pre>
</div>
<div id="word-frequency-in-scales" class="section level2">
<h2>Word Frequency in Scales</h2>
<pre class="r"><code>#Tidying the data

tidy_perf &lt;- tibble(source = job_perf$SOURCE_DOMAIN, text = job_perf$scale)
data(stop_words)

tidy_perf &lt;- tidy_perf %&gt;%
  unnest_tokens(word, text) %&gt;%
  anti_join(stop_words) %&gt;%
  count(source, word, sort = TRUE) %&gt;% 
  filter(word != &quot;na&quot;)

tidy_perf %&gt;%
  filter(n &gt; 5) %&gt;%
  mutate(word = reorder(word, n)) %&gt;%
  ggplot(aes(word, n, fill = source)) +
  geom_col() +
  xlab(NULL) +
  coord_flip() +
  ggtitle(&quot;Highest Frequency Words in Job Performance Scale&quot;)</code></pre>
<p><img src="/findings/performance_tidy_text_files/figure-html/process%20for%20turning%20the%20text%20into%20a%20tidy%20format-1.png" width="672" /></p>
</div>
<div id="sentiment-analysis-with-job-performance-scales" class="section level2">
<h2>Sentiment Analysis with Job Performance Scales</h2>
<pre class="r"><code>perf_sentiment &lt;- tidy_perf %&gt;%
  inner_join(get_sentiments(&quot;bing&quot;)) %&gt;%
  count(word, sentiment, sort = TRUE) %&gt;%
  ungroup()

perf_sentiment %&gt;%
  group_by(sentiment) %&gt;%
  top_n(10) %&gt;%
  ungroup() %&gt;%
  mutate(word = reorder(word, n)) %&gt;%
  ggplot(aes(word, n, fill = sentiment)) +
  geom_col(show.legend = FALSE) +
  facet_wrap(~sentiment, scales = &quot;free_y&quot;) +
  labs(y = &quot;Contribution to sentiment&quot;,
       x = NULL) +
  coord_flip()</code></pre>
<p><img src="/findings/performance_tidy_text_files/figure-html/something-1.png" width="672" /></p>
<pre class="r"><code>tidy_perf %&gt;%
  inner_join(get_sentiments(&quot;bing&quot;)) %&gt;%
  count(word, sentiment, sort = TRUE) %&gt;%
  acast(word ~ sentiment, value.var = &quot;n&quot;, fill = 0) %&gt;%
  comparison.cloud(colors = c(&quot;#1b2a49&quot;, &quot;#00909e&quot;), 
                   max.words = 100)</code></pre>
<p><img src="/findings/performance_tidy_text_files/figure-html/something-2.png" width="672" /></p>
<p>Done</p>
</div>
